{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useRef } from 'react';\nimport tw from 'tailwind-react-native-classnames';\nimport MapView, { Marker } from 'react-native-maps';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { selectDestination, selectOrigin, setDestination, setTravelTimeInformation } from \"../slices/navSlice\";\nimport MapViewDirections from 'react-native-maps-directions';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Map = function Map() {\n  var origin = useSelector(selectOrigin);\n  var destination = useSelector(selectDestination);\n  var mapRef = useRef(null);\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (!origin || !destination) return;\n    mapRef.current.fitToSuppliedMarkers(['origin', 'destination'], {\n      edgePadding: {\n        top: 50,\n        right: 50,\n        bottom: 50,\n        left: 50\n      }\n    });\n  }, [origin, destination]);\n  useEffect(function () {\n    if (!origin || !destination) return;\n\n    var getTravelTime = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              fetch(\"https://maps.googleapis.com/maps/api/distancematrix/json?\\n            units=imperial&origins=\" + origin.description + \"&destinations=\" + destination.description + \"\\n            &key=\" + \"AIzaSyBUcc05lKc5ONv_QCrs791_6PkOerYOpds\").then(function (res) {\n                return res.json();\n              }).then(function (data) {\n                dispatch(setTravelTimeInformation(data.rows[0].elements[0]));\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getTravelTime();\n  }, [origin, destination, \"AIzaSyBUcc05lKc5ONv_QCrs791_6PkOerYOpds\"]);\n  return _jsxs(MapView, {\n    ref: mapRef,\n    style: tw(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"flex-1\"]))),\n    mapType: \"mutedStandard\",\n    initialRegion: {\n      latitude: origin.location.lat,\n      longitude: origin.location.lng,\n      latitudeDelta: 0.005,\n      longitudeDelta: 0.005\n    },\n    children: [origin && destination && _jsx(MapViewDirections, {\n      origin: origin.description,\n      destination: destination.description,\n      apikey: \"AIzaSyBUcc05lKc5ONv_QCrs791_6PkOerYOpds\",\n      strokeWidth: 3,\n      strokeColor: \"black\"\n    }), (origin == null ? void 0 : origin.location) && _jsx(Marker, {\n      coordinate: {\n        latitude: origin.location.lat,\n        longitude: origin.location.lng\n      },\n      title: \"Origin\",\n      description: origin.description,\n      identifier: \"origin\"\n    }), (destination == null ? void 0 : destination.location) && _jsx(Marker, {\n      coordinate: {\n        latitude: destination.location.lat,\n        longitude: destination.location.lng\n      },\n      title: \"Destination\",\n      description: destination.description,\n      identifier: \"destination\"\n    })]\n  });\n};\n\nexport default Map;\nvar styles = StyleSheet.create({});","map":{"version":3,"names":["React","useEffect","useRef","tw","MapView","Marker","useDispatch","useSelector","selectDestination","selectOrigin","setDestination","setTravelTimeInformation","MapViewDirections","Map","origin","destination","mapRef","dispatch","current","fitToSuppliedMarkers","edgePadding","top","right","bottom","left","getTravelTime","fetch","description","then","res","json","data","rows","elements","latitude","location","lat","longitude","lng","latitudeDelta","longitudeDelta","styles","StyleSheet","create"],"sources":["/Users/mzk/Desktop/uber-everywhere/components/Map.js"],"sourcesContent":["import { StyleSheet, Text, View } from 'react-native'\nimport React, {useEffect, useRef } from 'react'\nimport tw from 'tailwind-react-native-classnames'\nimport MapView, { Marker } from 'react-native-maps'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { selectDestination, selectOrigin, setDestination, setTravelTimeInformation } from '../slices/navSlice'\nimport MapViewDirections from 'react-native-maps-directions'\nimport {GOOGLE_MAPS_APIKEY} from \"@env\"\n\nconst Map = () => {\n    // pulls in the value from the global store\n    const origin = useSelector(selectOrigin);\n    const destination = useSelector(selectDestination);\n    const mapRef = useRef(null);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(!origin || !destination) return;\n        // zoom and fit to markers\n        mapRef.current.fitToSuppliedMarkers(['origin', 'destination'], {\n            edgePadding: {top: 50, right:50, bottom: 50, left: 50},\n        });\n    }, [origin, destination]);\n\n    useEffect(() => {\n        if(!origin || !destination) return;\n        \n        const getTravelTime = async () => {\n            fetch(`https://maps.googleapis.com/maps/api/distancematrix/json?\n            units=imperial&origins=${origin.description}&destinations=${destination.description}\n            &key=${GOOGLE_MAPS_APIKEY}`).then((res) => res.json()).then(data => {\n                dispatch(setTravelTimeInformation(data.rows[0].elements[0]))\n            });\n        }\n        getTravelTime();\n    }, [origin, destination, GOOGLE_MAPS_APIKEY])\n  return (\n    <MapView\n    ref={mapRef}\n    style={tw`flex-1`}\n    mapType=\"mutedStandard\"\n    initialRegion={{\n      latitude: origin.location.lat,\n      longitude: origin.location.lng,\n      latitudeDelta: 0.005,\n      longitudeDelta: 0.005,\n    }}> \n    {origin && destination && \n    <MapViewDirections\n        origin={origin.description}\n        destination={destination.description}\n        apikey={GOOGLE_MAPS_APIKEY}\n        strokeWidth={3}\n        strokeColor=\"black\"\n    />\n    }\n        {origin?.location && (\n            <Marker\n            coordinate={{\n                latitude: origin.location.lat,\n                longitude: origin.location.lng,\n                \n            }}\n            title=\"Origin\"\n            description={origin.description}\n            identifier=\"origin\"\n            />\n        )}\n        {destination?.location && (\n            <Marker\n            coordinate={{\n                latitude: destination.location.lat,\n                longitude: destination.location.lng,\n                \n            }}\n            title=\"Destination\"\n            description={destination.description}\n            identifier=\"destination\"\n            />\n        )}\n    </MapView>\n  )\n}\n\nexport default Map\n\nconst styles = StyleSheet.create({})"],"mappings":"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"},"metadata":{},"sourceType":"module"}